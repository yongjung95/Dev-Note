 ### 서론
* `Spring Batch`가 `Chunk`지향 처리를 하고 있으며, 이를 `Job`과 `Step`으로 구성되어 있음을 배웠다.
* `Step`은 `Tasklet`단위로 처리되고, `Tasklet`중 에서 `ChunkOrientedTasklet`을 통해 `Chunk`를 처리하며 이를 구성하는 3요소로
    `ItemReader`,`ItemWriter`,ItemProcessor`가 있음을 배웠다.
    > 즉, `ItemReader & ItemWrtier & ItemProcessor`의 묶음 역시 `Tasklet`이란 이야기이다.
  > 이들의 묶음을 `ChunkOrientedTasklet`에서 관리하기 때문이다.
* `Spring Batch`의 `Chunk Tasklet`의 과정
    ![img_15.png](img_15.png)


### ItemReader 소개
* `DB, File, XML, JSON 등 ` 데이터 소스의 데이터를 읽어들인다.
* `JMS (Java Message Service)`와 같은 다른 유형의 데이터 소스도 지원한다.
* `Spring Batch`에서 지원하지 않는 `Reader`가 필요 할 경우 직접 해당 `Reader`를 만들 수도 있다.
    * `Spring Batch`는 이를 위해 `Custom Reader`구현체를 만들기 쉽게 제공한다.
* `Spring Batch`의 `Reader`에서 읽어올 수 있는 데이터 유형
    * 입력 데이터에서 읽어오기
    * 파일에서 읽어오기
    * `Database`에서 읽어오기
    * `Java Message service` 등 다른 소스에서 읽어오기
    * 본인만의 커스텀한 `Reader`로 읽어오기
* 개발자는 `ItemReader`와 `ItemStream` 인터페이스를 직접 구현해서 원하는 형태의 `ItemReader`를 만들 수 있다.
    하지만, `Spring Batch`에서 대부분의 데이터 형태는 `ItemReader`로 이미 제공하고 있기 때문에 커스텀한 `ItemReader`를 구현할 일이 별로 없을 것이다.
    > 단, 본인의 조회 프레임워크가 `Querydsl`, `Jooq`라면 직접 구현해야할 수도 있습니다.
  웬만하면 `JdbcItemReader`로 해결되지만, `JPA`의 영속성 컨텍스트가 지원이 안되서 `HibernateItemReader`를 이용하여 `Reader` 구현체를 직접 구현하셔야 합니다.

### 가장 대표적인 구현체인 JdbcPagingItemReader 살펴보기
* `ItemReader` 와 `ItemStream` 인터페이스를 같이 구현하고 있다.
* `ItemReader`
    * `read()`메서드로 데이터를 읽어온다.
* `ItemStream`
    * 주기적으로 상태를 저장하고 오류가 발생하면 해당 상태에서 복원하기 위한 마커 인터페이스이다.
    * 즉, 배치 프로세스의 실행 컨텍스트와 연계해서 `ItemReader`의 상태를 저장하고 실패한 곳에서 다시 실행할 수 있게 해주는 역할.
    * `open(). close()`는 스트림을 열고 닫는다,
    * `update()`를 사용하면 `Batch`처리의 상태를 업데이트 할 수 있다.


### Database Reader
* `Spring` 프레임워크의 강점 중 하나느 개발자가 비즈니스 로직에만 집중할 수 있도록 `JDBC`와 같은 문제점을 추상화한 것이다.
    > 이를 보고 서비스 추상화라고 한다.
* `Spring Batch`개발자들은 `Spring`프레임워크의 `JDBC`기능을 확장해, `Spring`의 `JdbcTemplate`의 문제점(분할처리를 지원하지 않아 직접 `limit, offset`사용하는 등의 작업)을
  해결하기 위해 2개의 `Reader`타입을 지원한다.