## 단위 테스트 (Unit Test)

* ### Unit Test 에서의 F.I.R.S.T 원칙
    * F - Fast (테스트 코드를 실행하는 일은 오래 걸리면 안된다.)
    * I - Independent (독립적으로 실행이 되어야 한다.)
    * R - Repeatable (반복 가능해야 한다.)
    * S - Self Validation (매뉴얼 없이 테스트 코드만 실행해도 성공,실패 여부를 알 수 있어야 한다.)
    * T - Timely (바로 사용 가능해야한다.)

* ### 스프링부트 테스트 디펜던시
    * 스프링부트는 애플리케이션 테스트를 위한 많은 기능을 제공한다. 크게 두 가지 모듈을 제공한다.
        * spring-boot-test : 핵심 기능 포함
        * spring-boot-test-autoconfigure : 테스트를 위한 AutoConfiguration 제공
    * 당연한 얘기지만, 스프링 부트에서 테스트를 위한 스타터를 제공한다. ```spring-boot-starter-test``` 
      추가하면 필요한 디펜던시를 자동으로 설정해준다.
      

* ### 스프링부트 "Unit Test"
    * 스프링부트에서 제공하는 @SpringBootTest 어노테이션을 사용하지 않는다.
    * 즉, 스프링을 전혀 실행하지 않는다는 얘기다.
      (내가 참고하는 블로그의 주인이 생각하는 단위 테스트는 다른 디펜던시가 전혀없는 상황에서 실행할 수 있는 테스트를 의미한다고 한다.)
      
    * 단, 보는 시각에 따라서 @WebMvcTest 를 단위 테스트로 보는 시각도 많다.
    
* ### 단위테스트 맛보기
    * ### 준비
        ![img_2.png](사진파일/단위테스트%20맛보기%20준비.png)
      
    * ### 테스트를 해보자.
        ![img_3.png](사진파일/단위%20테스트%20테스트_1.png)
      
        ![img_4.png](사진파일/단위%20테스트%20테스트_2.png)
      
    * ### Mock 객체를 사용해서 테스트를 해보자.
        * ### Mockito 를 사용해서 가짜 객체를 사용하겠다.
            ![img_5.png](사진파일/단위%20테스트%20Mockito%20사용.png)
        * coffeeRepository.findByName 을 실행하면, 실제로 데이터베이스 연동 로직을 수행하지 않는다.
        즉, Mockito 에 선언된 값으로 인터셉트 된다.
          

* ### 스프링부트 "Unit Test" 한계
    * 단위테스트는 정말 중요하지만, 우리는 스프링 프레임워크에 너무 많은 의존을 하고 있다.
    * 스프링에 의존해서 애플리케이션을 개발하는 상황에서는, 부득이하게 통합테스트를 진행할 수 밖에 없다.
    * 모든 코드를 "Unit Test"로 수행하겠다는 생각은 바람직하지 않다.
    * 물론 스프링 프레임워크 자체를 테스트해서는 안되지만, 스프링이 우리의 요구를 잘 충족하고 지원하는지 검증해야 한다.
    * 그래서 우리는 통합테스르를 적절하게 사용해야한다.
    * 통합 테스트는 애플리케이션의 신뢰도를 높일 수 있다. 하지만, 스프링 통합 테스트는 몇 가지 대가를 치러야만한다.
    * 그 중 가장 큰 대가는 바로 너무 느리다는 것이다.
        