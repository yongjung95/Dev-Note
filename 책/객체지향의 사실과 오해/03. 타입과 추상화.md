# 3장 타입과 추상화

## 추상화를 통한 복잡성 극복
- 현실에 존재하는 다양한 현상 및 사물과 상호작용하기 위해서는 우선 현실을 이해해야 한다.
  - 문제는 복잡성의 총체인 현실이라는 괴물을 그대로 수용하기에는 인간이 지니고 있는 인지 능력과 저장 공간이 너무나도 보잘것없다는 점이다.
  - 따라서 사람들은 본능적으로 이해하기 쉽고 예측 가능한 수준으로 현실을 분해하고 단순화하는 전략을 따른다.
- 추상화의 목적은 `불필요한 부분을 무시함으로써 현실에 존재하는 복잡성을 극복하는 것`이다.
  - 추상화는 `복잡한 현실을 단순화하기 위해 사용하는 인간의 가장 기본적인 인지 수단`이라고 할 수 있다.
- `추상화`
  - 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.
  - 복잡성을 다루기 위한 차원
    - 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다.
    - 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것이다.
  - 모든 경우에 추상화의 목적은 `복잡성을 이해하기 쉬운 수준으로 단순화하는 것`이라는 점을 기억하라.
- 객체지향 패러다임은 객체라는 추상화를 통해 현실의 복잡성을 극복한다.
  - 그리고 객체지향 패러다임을 이용해 유용하고 아름다운 애플리케이션을 개발하기 위한 첫걸음은 `추상화의 두 차원을 올바르게 이해하고 적용하는 것`이다.


## 객체지향과 추상화
### 그룹으로 나누어 단순화하기
- 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물을 객체지향 패러다임에서는 객체라고 한다.

### 개념
- 객체지향 패러다임의 중심에는 구체적이고 실제적인 객체가 존재하지만 수많은 객체들을 개별적인 단위로 취급하기에는 인간이 지닌 인지능력은 턱없이 부족하다.
  - 따라서 사람들은 `본능적으로 공통적인 특성을 기준으로 객체를 여러 그룹으로 묶어 동시에 다뤄야 하는 가짓수를 줄임으로써 상황을 단순화`하려고 노력한다.
- 이처럼 공통점을 기반으로 객체들을 묶기 위한 그릇을 `개념`이라고 한다.
  - 개념이란 `일반적으로 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념`을 뜻한다.
- 개념을 이용하면 객체를 여러 그룹으로 `분류`할 수 있다.
  - `개념은 공통점을 기반으로 객체를 분류할 수 있는 일종의 체`라고 할 수 있다.
- 각 객체는 `특정한 개념을 표현하는 그룹의 일원으로 포`함된다.
  - 객체에 어떤 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때 객체를 그 개념의 `인스턴스`라고 한다.

> 객체란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미한다.
> 개념이 객체에 적용됐을 때 객체를 개념의 인스턴스라고 한다.

- 개념은 세상의 객체들을 거르는 데 사용하는 정신적인 렌즈를 제공한다.
  - 렌즈를 통해 세상을 바라보면 수백 수천 개의 다양한 객체가 존재하는 복잡한 세상을 몇 개의 개념만으로 `단순화`할 수 있다.
  - 개념은 `객체를 분류할 수 있는 틀을 제공`한다.

### 개념의 세 가지 관점
- 어떤 객체에 어떤 개념이 적용됐다고 할 때는 `그 개념이 부가하는 의미를 만족시킴으로써 다른 객체와 함께 해당 개념의 일원이 됐다는 것을 의미`한다.
- 세 가지 관점
  - 심볼
    - 개념을 가리키는 간략한 이름이나 명칭
  - 내연
    - 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
    - 개념을 객체에게 적용할 수 있는지 여부를 판단하기 위한 조건이라는 점
  - 외연
    - 개념에 속하는 모든 객체의 집합
    - 개념의 인스턴스들이 모여 이뤄진 집합
- 개념이 심볼, 내연, 외연으로 구성돼 있다는 사실보다는 `개념을 이용해 객체를 분류할 수 있다는 사실이 더 중요`하다.
  - 개념을 이용해 공통점을 가진 객체들을 분류할 수 있다는 아이디어는 `객체지향 패러다임이 복잡성을 극복하는 데 사용하는 가장 기본적인 인지 수단`이기 때문이다.

### 객체를 분류하기 위한 틀
- 외연의 관점에서 어떤 객체에 어떤 개념을 적용할 수 있다는 것은 `동일한 개념으로 구성된 객체 집합에 해당 객체를 포함시킨다는 것을 의미`한다.
  - 결국 `해당 객체를 개념이 적용된 객체 집합의 일원으로 맞아들인다는 것을 의미`한다.
- 객체에 어떤 개념을 적용할 것인지를 결정하는 것은 결국 객체들을 개념에 따라 분류하는 것과 동일하다.
  - 따라서 분류란 `특정한 객체를 특정한 개념의 객체 집합에 포함시키거나 포함시키지 않는 작업을 의미`한다.

> 분류란 객체에 특정한 개념을 적용하는 작업이다. 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것이다.

- `분류`
  - 객체지향의 가장 중요한 개념 중 하나다.
  - 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다.
  - 적절한 분류 체계는 `애플리케이션을 다루는 개발자의 머릿속에 객체를 쉽게 찾고 조작할 수 있는 정신적인 지도를 제공한다는 것`이다.
  - 객체는 소중하다.
    - 소중한 객체를 안전하고 적절한 장소에 보관할 수 있도록 여러분의 인지능력을 발휘해 최대한 직관적으로 분류하라.

### 분류는 추상화를 위한 도구다.
- 개념은 추상화의 첫 번째 차원인 일반화를 적용한 결과다.
- 불필요한 세부 사항을 제거하는 것은 추상화의 두 번째 차원을 따른 것이다.
- 개념은 `객체들의 복잡성을 극복하기 위한 추상화 도구`다.
- 추상화를 사용함으로써 우리는 극도로 복잡한 이 세상을 그나마 제어 가능한 수준으로 단순화 할 수 있는 것이다.


## 타입
### 타입은 개념이다
- 타입의 정의는 `개념의 정의와 완전히 동일`하다.
  - 타입은 `공통점을 기반으로 객체들을 묶기 위한 틀`이다.
  - 타입은 개념과 마찬가지로 심볼, 내연, 외연을 이용해 서울할 수 있으며 타입에 속하는 객체 역시 타입의 인스턴스라고 한다.

> 타입은 개념과 동일하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미한다.
> 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다. 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.

### 데이터 타입
- 메모리의 세상에는 타입이라는 질서가 존재하지 않는다.
  - 실제로 '타입이 없다'라는 말은 메모리 안의 데이터를 다룰 수 있는 단 하나의 타입만이 존재한다는 것을 의미한다.
- 어떤 메모리 조작에 들어 있는 값의 의미는 그 값을 가져다 자신의 용도에 맞게 사용하는 외부의 해석가에 의해 결정된다.
  - 이때 흔히 우리가 애플리케이션이라고 부르는 프로그램이 바로 그런 해석가의 일종이다.
- 컴퓨터 안에 살아가는 데이터를 목적에 따라 분류하기 시작하면서 프로그래밍 언어 안에는 서서히 `타입 시스템`이 자라나기 시작했다.
  - 타입 시스템의 목적은 `메모리 안의 모든 데이터가 비트열로 보임으로써 야기되는 혼란을 방지하는 것`이다.
  - 결과적으로 타입 시스템의 목적은 `데이터가 잘못 사용되지 않도록 제약사항을 부과 하는 것`이다.
- 타입에 관한 중요한 사실
  - 타입은 `데이터가 어떻게 사용되느냐에 관한 것`이다.
    - 데이터가 어떤 타입에 속하는지를 결정하는 것은 데이터에 적용할 수 있는 작업이다.
  - 타입에 속한 `데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰`진다.
  
> 데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다.
> 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.

### 객체와 타입
- 전통적인 데이터 타입에서 이야기 하는 타입과 객체지향의 타입 사이에 깊은 연관성이 있다.
- 상태는 `행동의 결과로 초래된 부수효과를 쉽게 표현하기 위해 도입한 추상적인 개념`이다.
- 객체를 창조할 때 가장 중요하게 고려해야 하는 것은 `객체가 이웃하는 객체와 협력하기 위해 어떤 행동을 해야 할지를 결정하는 것`이다.
  - `객체가 협력을 위해 어떤 책임을 지녀야 하는지를 결정하는 것이 객체지향 설계의 핵심`이다.
- 객체의 타입
  - 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 `객체가 수행하는 행동`이다.
  - 객체의 `내부적인 표현은 외부로부터 철저하게 감춰`진다.

### 행동이 우선이다
- `객체가 어떤 행동을 하느냐에 따라 객체의 타입이 결정`된다.
  - 객체의 타입은 객체의 내부 표현과는 아무런 상관이 없다.
  - 결과적으로 `동일한 책임을 수행하는 일련의 객체는 동일한 타입에 속한다고` 말할 수 있다.
- `객체의 타입을 결정하는 것은 객체의 행동`뿐이다.
  - 객체가 `어떤 데이터를 보유하고 있는지는 타입을 결정하는 데 아무런 영향도 미치지 않는다.`
- 타입이 데이터가 아니라 행동에 의해 결정된다는 사실은 객체지향 패러다임을 특징 짓는 중요한 몇 가지 원리와 원칙을 의미한다.
  - 같은 타입에 속한 객체는 `행동만 동일하다면 서로 다른 데이터를 가질 수 있다.`
    - 여기서 `동일한 행동이란 동일한 책임을 의미하며, 동일한 책임이란 동일한 메시지 수신을 의미`한다.
    - 다만 내부의 표현 방식이 다르기 때문에 동일한 메시지를 처리하는 방식은 서로 다를 수밖에 없다.
      - 이것은 `다형성`에 의미를 부여한다.
  - 데이터의 내부 표현 방식과 무관하게 `행동만이 고려 대상이라는 사실은 외부에 데이터를 감춰야 한다는 것을 의미`한다.
    - 훌륭한 객체지향 설계는 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 한다.
      - 이 원칙을 흔히 `캡슐화`라고 한다.
- 행동에 따라 객체를 분류하기 위해서는 객체가 `내부적으로 관리해야 하는 데이터가 아니라 객체가 외부에 제공해야 하는 행동을 먼저 생각`해야 한다.
  - 외부에 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후, 데이터를 책을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화 해야 한다.
- `객체를 결정하는 것은 행동`이다.
  - 데이터는 단지 행동을 따를 뿐이다.
  - `객체를 객체답게 만드는 가장 핵심적인 원칙`이다.
  

  ## 타입의 계층
  ### 일반화/특수화 관계
  - 타입과 타입 사이에는 일반화/특수화 관계가 존재할 수 있다.
  - 일반화와 특수화는 동시에 일어난다.
  - 객체지향에서 일반화/특수화 관계를 결정하는 것은 `객체의 상태를 표현하는 데이터가 아니라 행동이라는 것`이다.
    - 어떤 객체가 다른 객체보다 더 일반적인 상태를 표현하거나 더 특수한 상태를 표현한다고 해서 두 객체가 속하는 타입 간에 일반화/특수화 관계가 성립하는 것은 아니다.
    - 두 타입 간에 일반화/특수화 관계가 성립하려면 `한 타입이 다른 타입보다 더 특수하게 행동해야 하고 반대로 한 타입은 다른 타입보다 더 일반적으로 행동`해야 한다.
    - 일반화/특수화 관계에 있어서도 중요한 것은 `객체가 내부에 보관한 데이터가 아니라 객체가 외부에 제공하는 행동`이다.
  - 일반적인 타입
    - 특수한 타입이 가진 모든 행동들 중에서 일부 행동만 가지는 타입
  - 특수한 타입
    - 일반적인 타입이 가진 모든 행동을 포함하지만 거기에 더해 자신만의 행동을 추가하는 타입을 가리킨다.
  - 따라서 `일반적인 타입은 특수한 타입 보다 더 적은 수의 행동을 가지고 특수한 타입은 일반적인 타입보다 더 많은 수의 행동`을 가진다.
    - `타입의 내연을 의미하는 행동의 가짓수와 외연을 의미하는 집합의 크기는 서로 반대라는 사실`이다.
  
### 슈퍼타입과 서브타입
- 일반적인 타입을 `슈퍼타입`이라고 하고, 좀 더 특수한 타입을 `서브타입`이라고 한다.
  - 중요한 것은 `두 타입 간의 관계가 행동에 의해 결정`된다는 점이다.
  - 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 `행위적 호환성을 만족시켜야 한다.`
  - 어떤 타입을 다른 타입의 서브타입이라고 말할 수 있으려면 다른 타입을 대체할 수 있어야 한다.
  
### 일반화는 추상화를 위한 도구다
- 추상화의 두 번째 차원은 `중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거시켜 단순하게 만드는 것`이다.
- 차이점은 배제하고 공통점만을 강조함으로써 공통의 타입으로 분류한다.
- 불필요한 특성을 배제하고 좀 더 포괄적인 의미를 지닌 객체로 일반화한다. 
- 객체지향 패러다임을 통해 세상을 바라보는 거의 대부분의 경우에 `분류와 일반화/특수화 기법을 동시에 적용`하게 된다.


## 정적 모델
### 타입의 목적
- 타입을 사용하는 이유는 `인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문`이다.
- 타입은 `시간에 따라 동적으로 변하는 앨리스의 상태를 시간과 무관한 정적인 모습`으로 다룰 수 있게 해준다.

### 그래서 결국 타입은 추상화다
- 타입은 `추상화`다.
  - `불필요한 시간이라는 요소와 상태 변화라는 요소를 제거하고 철저하게 정적인 관점에서 모습을 묘사하는 것`을 가능하게 해준다.
  - 타입을 이용하면 `객체의 동적인 특성을 추상화`할 수 있다.
- 결국 타입은 `시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법`이다.
  
### 동적 모델과 정적 모델
- 객체를 생각할 때 두 가지 모델을 동시에 고려해야 한다.
  - 객체가 특정 시점에 구체적으로 어떤 상태를 가지느냐.
    - 이를 객체의 `스냅샷`이라고 한다.
    - 객체지향 모델링을 위한 표준 언어인 UML에서 스탭샷은 `객체 다이어그램`이라고도 불린다.
    - 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것을 `동적 모델`이라고 한다.
  - 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것.
    - 일반적으로 이런 모델을 `타입 모델`이라고 한다.
    - 이 모델은 동적으로 변하는 객체의 상태가 아니라 객체가 속한 타입의 정적인 모습을 표현하기 때문에 `정적 모델`이라고도 한다.
- 객체지향 애플리케이션을 설계하고 구현하기 위해서는 `객체 관점의 동적 모델과 객체를 추상한 타입 관점의 정적 모델을 적절히 혼용`해야 한다.
  - `동적 모델과 정적 모델의 구분은 실제 프로그래밍이라는 행위와도 관련이 깊다.`
    - 객체지향 프로그래밍 언어를 이용해 클래스를 작성하는 시점에는 `시스템을 정적인 관점에서 접근 하는 것`이다.
    - 그러나 실제로 애플리케이션을 실행해 `객체의 상태 변경을 추적하고 디버깅하는 동안에는 객체의 동적인 모델을 탐험하고 있는 것`이다.
  - `애플리케이션의 동적인 관점과 정적인 관점을 모두 다뤄야 한다는 사실을 쉽게 이해할 수 있다는 것`이다.

### 클래스
- 객체지향 프로그래밍 언어에서 정적인 모델은 클래스를 이용해 구현된다.
  - `타입을 구현하는 가장 보편적인 방법은 클래스를 이용`하는 것이다.
- 하지만 `클래스와 타입은 동일한 것이 아니다.`
  - 타입은 `객체를 분류하기 위해 사용하는 개념`
  - 클래스는 `단지 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나`이다.
- 객체지향 패러다임을 주도하는 대부분의 프로그래밍 언어는 클래스를 기반으로 하기 때문에 대부분의 사람들은 클래스와 타입을 동일한 개념이라고 생각한다.
- `클래스와 타입을 구분하는 것은 설계를 유연하게 유지하기 위한 바탕`이 된다.
  - 클래스는 `타입의 구현외에도 코드를 재사용하는 용도로도 사용하기 때문에 클래스와 타입을 동일시하는 것은 수많은 오해와 혼란`을 불러일으키곤 한다.

### 정리
- `객체를 분류하는 기준은 타입`이며, `타입을 나누는 기준은 객체가 수행하는 행동`이다.
  - `객체를 분류하기 위해 타입을 결정한 후 프로그래밍 언어를 이용해 타입을 구현할 수 있는 한 가지 방법이 클래스`이다.
- 결국 객체지향에서 중요한 것은 `동적으로 변하는 객체의 상태`와 `상태를 변경하는 행위`다.
  - 클래스는 `타입을 구현하기 위해 프로그래밍 언어에서 제공하는 구현 메커니즘`이라는 사실을 기억하라.